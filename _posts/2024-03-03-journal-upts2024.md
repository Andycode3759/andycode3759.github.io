---
title: 联合省选 2024（江西）游记
date: 2024-03-03 22:09:16 +0800
categories: [游记]
tags: [省选]
math: true
---

## Day -4 (2.26)

打了把 2023 省选线下重现赛，两天题目塞成一天考。

D1T3 暴力因为效率还不够高挂了 20 分，又复习了一遍平板电视。

D2T1 补题的时候被疯狂卡常。卡不过就算了吧，学会正解写法就行。

## Day -2 (2.28)

WC2024 线下重现赛。

T1 看出来是背包，本来写的是 $O(n^2V)$，后面发现可以正向 + 反向扫两遍同步做背包，而且只有区间求和 + 单点修改 + 单点查询三种操作。哎呀，这不树状数组嘛！优化一下直接降到 $O(n \log V)$。

结果不但没降反而多了一个 $\log$ 变成了 $O(nV \log V)$，因为单点查询需要调用 $O(V)$ 次……挂了 20 分。

T2 一点思路都没有，乱写一通一分没有。T3 直接放弃。

后面补 T2 发现可以当成图来处理，$O(n^2)$ DFS 就有 40 分。又发现考场上推到一半的思路可以接上，把 $L$ 的区间全都处理出来再 RMQ + 二分就是正解。因为不同段对于 $L$ 的要求区间是互相独立的，考场上没想到这一点就把这么好的一个性质给放了。

## Day 0 (3.1)

出发日。坐了一个多小时地铁，到宾馆已经累麻了。21:30 早早上床。

## Day 1 (3.2)

醒来一看手机才 5:40？？？高中牲的生物钟相当可怕（

进考场二话不多说先写 `rp++.cpp`，然后试图打一个 Tarjan 找割点的板子，结果发现打不出来。只能在心里默默祈祷不考割点。

一看 T1 没看懂题目，又看了下 T2 T3 都不会做，于是只好静下心来读 T1。

过了二十分钟终于读懂了，出题人可能嫌原题面过于若只而只给形式化题面，其实只要把原题面还原出来就好做了：

> 小 X 从 $(0,0)$ 出发拜访住在 $(x,y)$ 的小 Y。小 X 每天能走的范围是曼哈顿距离不超过 $k$ 的区域。图上会挂季风，季风以 $n$ 天为周期，第 $i$ 天原本位于 $(a,b)$ 的小 X 会被吹跑到 $(a+x_{i \bmod n},b+y_{i \bmod n})$ 的位置。求小 X 最少需要多少天到达目的地，如果永远无法到达输出 `-1`。

在纸上画了下马上发现就是个菱形区域在动的同时范围在不断扩大，写了个暴力，虽然慢了点但是小样例能过。之后敏锐地察觉到天数越大、范围越大、越有可能到达终点，似乎有单调性可以二分，于是就写了。

但是大样例无情地打回了我的想法。一看好像 $k=0$ 的点才会错，那就单独处理一下，用一个类似于大步小步的算法把总天数拆成 $an+b(0 \leq b < n)$，预处理 $b$ 再枚举 $a$。调了很久发现始终不能 100% 对上样例，程序越写越乱，想了想应该是有其他什么地方写错了，决定先放下 T1 把后面的部分分先拿了。

此时已经过去 2 个小时。花了半小时把 T2 暴力写完，拿了 12 分。T3 因为码力不足写不来暴力就放弃了。调整心情回来重新做 T1，把之前写的代码全删了，重新在纸上推了一遍，发现可以枚举一个 $i (0 \leq i < n)$ 再考虑把答案拆成 $an+i$，然后找最小的 $a$。其中小 X 可达范围的中心到目的地的距离是关于 $a$ 的一个线性单谷函数，可以二分求最低点后，再二分求 $x=0$ 到最低点这条线段与 $x$ 轴的交点。顺着这个思路终于写出来了，大样例全过，相当开心。

但是很快就发现题目似乎想刻意卡 $O(n \log n)$ 做法，自己手动复制粘贴造了个 $\sum n=10^6$ 的大样例，跑了 1.2s。卡了一会儿常，之后心想反正无所谓了，10 分拿不到也就算了。

估分 $90+12+0=102$。能上三位数可喜可贺。

颓了一个下午 + 晚上。

## Day 2 (3.3)

吃早饭的时候听到某人 Day1 三道题全爆 CE，乐。

去的路上教练突然叮嘱我们编译的时候记得开 `-std=c++14`，我敏锐地察觉到可能有什么不对劲。

到了考场监考老师也强调了一遍同样的问题。有个同学说他队友 Day1 全开 C++20 然后爆零，估计就是吃早饭的时候听到的那个人。

不管怎么样先把 Day2 打好再说。开题，花了二十分钟全看了一眼，然后思考有没有什么可做的部分分。

T1 先把暴力写了，拿了 20 分。然后寻思着性质 A 应该会比较好做，在纸上推了一下发现就是个贪心，写了一下对上大样例，又拿下 35 分，爽！

T2 出题人非常慷慨地送了整整 5 分（$m=0$ 的点输出 `1`）。应该只有 $k=0$ 是会做的。先考虑了一下特殊性质，然后思考一般解法，求有多少种 $1$ 到 $n$ 的排列满足给定的一个有向图拓扑序约束。

纸上推了半小时没推出来，怀疑是自己数学功底不行。然后看到 $n \leq 15$，灵光乍现想到状压 DP，直接秒了，拿下 20 分。

T3 乱搞一通，希望能送点分。

估分 $55+20+0=75$。

我才发现原来 Emacs 自带一堆游戏（俄罗斯方块、五子棋（附带一个相当聪明的 AI）、贪吃蛇），剩下一个小时全靠玩这些打发时间。

回去的路上教练说，[@\_LittleBoat\_](https://www.luogu.com.cn/user/766639) 的 D1T1 爆 CE 了，原因是 C++14 里 `abs()` 函数不支持 `__int128`，默认编译选项不会报这个错……队友也无缘省队，默哀。我自己因为在卡常时手写了一个 `min` 和 `abs` 而侥幸逃过一劫。

晚上等到了云斗的民间数据：`90+4+0+40+20+0=154`，应该是民间数据过强导致 D1T2 和 D2T1 被卡了点分。这个成绩已经相当满意了，省选居然还可以得到比 NOIP 还高的排名。

## 再见，OI

不出意外的话，这应该是 OI 生涯的告别赛了。引用云斗上面的一段话：

> 只有到了某个关键的时刻之后，你才会发现，“人生有梦，各自精彩”，其实并不是一句戏谑的嘲讽，不是一碗尴尬的鸡汤，更不是一声无奈的感叹，而是一句真真切切的真理。因为人生就是这样。每个人都有只属于自己的、独一无二的旅程。因此，我们只需要享受当下、享受 OI、享受比赛！
>
> 所以，我亲爱的朋友，趁还有机会，高傲地再飞一次吧！愿我们抵达路的末端时，都不会后悔。

OI 一路上有过拼搏，有过失落，有过喜悦，这些回忆和历练的价值远远大于“能不能进省队”这一简单的结果。当我们从 OI 一路走来，在路的末端回首过往，自己问心无愧之时，无论最终结果如何，我们也都有资格说，自己的 OI 之旅算是圆满了。

再见，OI。ICPC，我们相约大学再见！
